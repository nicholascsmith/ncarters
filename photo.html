<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="pageTitle">ncarters</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .photo-header { display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-lg); }
    .photo-pfp { width: 60px; height: 60px; border-radius: 50%; }
    .photo-info { display: flex; flex-direction: column; gap: var(--space-xs); }
    .photo-username { font-weight: 600; font-size: 1rem; }
    .photo-music { font-size: 1rem; color: var(--text-dim); }
    .photo-container { position: relative; cursor: pointer; }
    .photo-view { max-width: 100%; height: auto; display: block; }
    .mute-indicator {
      position: absolute;
      bottom: 12px;
      right: 12px;
      width: 32px;
      height: 32px;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }
    .mute-indicator svg { width: 16px; height: 16px; fill: #fff; }
    .caption { margin-top: var(--space-lg); }
    .caption strong { font-weight: 600; }
    .back-link { display: inline-block; margin-top: var(--space-lg); color: var(--text); text-decoration: none; }
  </style>
</head>
<body>
  <main>
    <section>
      <div class="photo-header">
        <img src="photos/profile.jpg" alt="Profile" class="photo-pfp">
        <div class="photo-info">
          <div class="photo-username">ncarters</div>
          <div class="photo-music">♫ Song Title • Artist Name</div>
        </div>
      </div>
      <div class="photo-container" id="photoContainer">
        <img class="photo-view" id="photo" alt="Photo">
        <div class="mute-indicator" id="muteIndicator">
          <svg viewBox="0 0 24 24">
            <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
          </svg>
        </div>
      </div>
      <p class="caption"><strong>ncarters</strong> Photo caption goes here.</p>
      <a href="/" class="back-link">← Back</a>
      <audio id="audio" loop></audio>
    </section>
  </main>
  <script>
    const params = new URLSearchParams(window.location.search);
    const photo = params.get('src');
    const song = params.get('song');
    const artist = params.get('artist');
    const caption = params.get('caption');
    const audioSrc = params.get('audio');

    const audioEl = document.getElementById('audio');
    const muteIndicator = document.getElementById('muteIndicator');
    const photoContainer = document.getElementById('photoContainer');

    if (photo) document.getElementById('photo').src = photo;
    if (song && artist) {
      document.querySelector('.photo-music').textContent = `♫ ${song} • ${artist}`;
    }
    if (caption) {
      document.querySelector('.caption').innerHTML = `<strong>ncarters</strong> ${caption}`;
      document.getElementById('pageTitle').textContent = caption;
    }

    // Handle audio if provided
    if (audioSrc) {
      audioEl.src = `photos/${audioSrc}`;
      audioEl.muted = true;

      // Auto-play muted audio
      audioEl.play().catch(err => console.log('Autoplay blocked:', err));

      // Click to toggle mute
      photoContainer.addEventListener('click', () => {
        audioEl.muted = !audioEl.muted;

        // Update icon
        if (audioEl.muted) {
          muteIndicator.innerHTML = `
            <svg viewBox="0 0 24 24">
              <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
            </svg>
          `;
        } else {
          muteIndicator.innerHTML = `
            <svg viewBox="0 0 24 24">
              <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            </svg>
          `;
        }
      });
    } else {
      // No audio - hide mute indicator
      muteIndicator.style.display = 'none';
    }
  </script>
</body>
</html>
